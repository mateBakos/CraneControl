function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 14-Jul-2015 11:36:16.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 39xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [0;0;61;0;0;65;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;2125;7.8;2.27;19.4;0;0;1;6;0;0;0;0;1;2;0];
x1_step1_gain = [2;2;0.00455580865603645;2;2;0.0037037037037037;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;2;0.000457142857142857;0.186915887850467;0.488997555012225;0.0571428571428571;2;2;0.0645161290322581;0.0363636363636364;2;2;2;0.384615384615385;0.00227531285551763;0.666666666666667;0.0897666068222621];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.5182126535636562;-1.1101692713880849;-0.65911522540619127;0.22069856090579679;0.424352833767976;-0.12779928755745334;0.47338872841861296;-0.927742896549834;1.313992935691793;-1.7622135820253229];
IW1_1 = [0.40425963066679999 -0.82001178479599024 -1.3559926399098383 0.067496527480637128 0.17001252865500083 -0.56304015306031374 0.31340503914848072 -0.48185018267446422 -0.4055256310365562 0.16371832599852743 0.68597964125950917 -3.545743440799761 -0.48379931191224657 -0.2552390330201581 0.038855536078994432 0.31026945446786913 3.0880617367257273 -2.2571697755147277 0.11279061446989525 0.19986998563450628 0.055277565886261155 0.5077915071210295 -0.36460772556053389 -0.57506453741525609 -0.70745207409415356 2.3922987073284578 -5.5634538018018667 -4.0280582564758625 1.6073448623826074 -1.8788272081516415 -2.1477163813496887 2.4495200846943836 0.111431740459038 -0.039887899842760102 0.9916008932594873 -2.5354647175976512 -2.1489867799482538 0.17404308968879156 -2.974779841806189;0.25022424582096425 -0.03594295075260287 -0.18492128412102465 -1.1103593640998655 1.2194239060998247 -0.068648570231361034 -0.33408609580020371 -1.228579718258749 -0.30839656234152596 0.24599578792157167 0.052069861111800994 -0.18480554484702574 -0.012062679847497069 1.4598460648901157 -0.050019592322960139 0.030336796195520266 0.044554227544598674 0.16195847478036174 0.99856530587560477 -0.7657730618580143 -0.42065658097345726 0.12037643196341674 -0.15924527734064989 -0.31191857886132662 -0.00715397371995867 -1.209164849759315 0.31207600301869987 -0.45114929303552853 0.19281392981423401 -0.066354420043301943 -0.1342683659432154 -0.024364393602970824 0.66488872675421051 -0.52023519717328426 -2.6295984351320101 0.12444907058336697 -0.28211208073211003 0.43359772032670113 0.1287412867417313;-0.22836228543139081 0.19625788971875077 1.0769815216884284 -0.060945256743028593 -0.39793296237304254 0.54676768180575253 -0.41118844096844509 -0.037495296741669605 -0.30988898990297775 -0.45055450376411477 0.051697275771110392 1.6276901104628085 1.9575673394816648 0.40348006707511497 0.098759530828096298 -0.041169635259379486 1.5141947038908339 -4.7777337821945132 -0.38377450040821737 -0.79922283690171714 -0.18988225011858192 -0.091744452629304085 -2.51330728399151 2.7410605368137002 -1.5648974508381772 0.69187511841945559 -2.0909099622193525 -0.00042404060804640542 -1.6093626730587078 2.0759914946601299 -0.12838857115627866 0.36367254956421879 0.032696992683206583 -0.13503085658363678 0.1721431007211712 0.54275454356194863 -0.66240248330050755 7.4588344339968549 -1.9216898185231821;0.39911800644417372 -0.7722491878390314 -0.90589400368795681 -0.48199797920644194 0.46605937844662726 -3.9071721027782593 1.1043363029088451 -0.58052810113087638 0.56030247524576537 0.075331724217143556 0.8516585334335971 0.26694675770798798 -0.91148997929577313 -0.068428120860410446 0.91602064929087246 -1.3667484456184784 -1.0155747451029082 -0.80897589506109724 2.5522722912402109 0.60113337144332546 0.13938473411733177 0.70796945725265625 -2.0322059861800708 1.5044757877229167 -0.52925198923101768 0.490920519472689 -0.91460210343692827 -1.2288495600287763 0.41551905741925382 0.13606464106117272 1.4595939394802515 -1.8732527603929841 -1.0844355787712003 1.0440235385316421 -1.1008192121413813 -0.44531530290337307 -5.8218249042601897 -2.1435612343921919 -0.32349310133636749;-0.02519806949908087 -0.044623520122338264 -0.14266568249436884 -0.6673819820750031 0.64808861966485609 0.096834736671240956 -0.69446778753717131 1.1968278098273581 -0.21481095281342835 -0.50384255961803559 -0.37208911150020163 -0.65504313546512194 -0.62148094252551644 1.535917679030639 1.7562058866698778 -0.62086838738785366 -0.68811825377881275 -0.63032134849085397 -0.79577913764436869 -0.49775633255791896 -0.60327818404887423 0.017089786611024834 0.03624300768946951 0.0020606521787340073 0.091336475060340552 0.1424762199419789 0.10339970320773954 0.071319801789906531 0.26341675057035885 0.26536789711032144 0.0016177760606462918 0.26599561601903099 0.15712241046198269 0.14292645357921246 0.22526239276058027 0.081390686030516357 1.0041569462977942 -0.22268886243759176 0.032041098289497257;-0.10425509635309665 -0.075024071956555013 0.037800043520382506 -0.73706239793028472 0.91562496784477598 -0.022539498486433041 -0.35585464742466999 0.29075609628253102 -0.41495667331694591 -0.4446991327758687 0.12452568129970164 -0.39982973094651825 -0.38126357880548334 0.8862052711025179 1.1055139871422968 -0.39051647285564256 -0.39270486956223477 -0.4013265533332746 -0.33965978789628848 -0.28061688233985133 0.27512459701847358 -0.015425403731420071 -0.02928226937679726 -0.019535155239757941 -0.10670449229598064 -0.0039475395059937503 -0.034225463665463855 -0.013619804415021426 -0.074292804694936113 -0.077473919264000629 -0.014768485117490401 -0.13985386656938217 0.28097504435923693 0.2115847969041566 0.94798634103986057 -0.14982147687656761 -4.8017490109868186 -0.00066654398966900855 -0.0052557469654158362;0.22368808331027557 0.15374121864177154 -0.53438083402053438 0.42586461806043097 0.28263564611491793 0.62165343935683404 0.80215914985112891 0.54429262023192293 -0.0043601216346841019 0.2187481788632234 1.6730141976916579 -0.2561864594857225 -1.2030972107460061 1.2882102925614183 -0.37090389211522579 -1.2950204642046901 -0.14351782209343036 -0.81924884302371281 -0.61778590795522736 0.78267761190985607 0.012706479382345089 0.069623035512356116 -0.1209074779777097 0.46424752104697509 1.8599897243403674 3.9808914800851922 -2.6088704380244692 1.3130364448391745 -0.43948170645387497 0.71044560907820231 0.47761252336485926 -1.0267402190866188 -0.12748189020756562 0.16040974426575474 -6.4088983745861068 2.0544927654258025 -0.97824673408911211 0.17786453904284139 -2.2618142301153257;-1.1790403716011912 1.0226680401417119 -1.4618771835728941 0.11353615333794824 -0.25986206562230446 -1.7388879515901186 -0.16425847460626955 0.12540889584965012 0.041531388634843763 0.43409880561903746 -0.80330215834966834 -3.1924602854793211 -0.27686773166103879 0.53599668039165138 0.82158886023596955 0.13425911994658857 2.4222880527459125 -0.18690031866708207 -0.78031845369779873 2.5427905908955735 -0.02987125514623009 -2.2426675585553588 0.29977741236828664 1.5414148774548464 -3.0042817531386405 -0.71446145975140896 -2.1909968826739963 -0.13221048003017705 3.6654997824858744 -3.1792621869810702 -0.07380958420430575 -1.4124055326200968 1.8815854327732431 -1.6690867942184084 3.0412151034179939 -1.2710380859517618 -2.8787497742620163 4.6080981586060403 0.29924735725242746;1.7490831838478786 -1.5768332170831374 2.2674616319313334 -0.30818397342155252 0.09932528095507652 4.0347843111538042 -0.81446280588151088 -0.0024998976970279849 0.066708225133602861 0.17944106187702369 -0.55385257357126461 0.89591520324522267 0.21990867256831625 1.0300681657763724 -0.25765857344090737 0.38825652422877732 -0.66577680895225089 -1.810941279798423 1.2735573523304911 0.48771651839138641 0.030405621891851892 -1.1919875202278338 1.4629359852559214 -0.75950067669831278 2.6091170610781935 -2.7687020394858859 -2.8899848695881376 6.0533929810744525 0.9655316934809709 -0.81723611187333167 -2.176444859852491 0.69637607003677671 0.27680360928729297 -0.56790412965076809 0.43368574575576668 0.65147202795655501 0.63141364725900317 -0.73343615234316595 0.10563862843626137;-0.19791051356454503 -0.2892449448001902 -0.60673597324099127 0.1656924610431027 -0.62699673126008537 0.4476187661682437 -0.32518751857857109 2.6852277273284573 0.59144427770638242 0.42615607434497133 -0.53730856245554848 -0.25158780994609753 -0.19293953669634431 0.16879465400566451 -0.40768715607494843 -0.2368577870225762 -0.31124157598122937 -0.24819547745927245 -0.62146673811546638 3.7873312765460589 0.032532019061609352 -0.09484085060831933 -0.034549265012104438 -0.10006986291003075 0.35242094662914092 0.61977627784025091 0.15141446359904009 0.24735963925466165 -0.15864756691115281 -0.11400008907219746 0.020229109933932177 6.9665102929606606 -0.0010984526638494509 0.045881740820130919 0.11866180695745776 0.30110502229016389 -0.48439116310364094 -0.54099339494667142 -0.040016741653963288];

% Layer 2
b2 = -0.38811404265400296;
LW2_1 = [-0.0053904145301151302 0.0020830863521191993 -0.0062274414523945743 0.0037356895749127515 -0.35907420159643016 0.32591016143741941 -0.013028513075579153 -0.003560586852900493 -0.0062199616333363898 0.14332105724602223];

% Output 1
y1_step1_ymin = -1;
y1_step1_gain = 0.0269179004037685;
y1_step1_xoffset = 9.8;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
x = bsxfun(@minus,y,settings_ymin);
x = bsxfun(@rdivide,x,settings_gain);
x = bsxfun(@plus,x,settings_xoffset);
end
